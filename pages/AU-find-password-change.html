<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로그인/회원가입 - 새로운 비밀번호 설정</title>

    <!-- Link Font -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
    <!-- Link Tailwind -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Link Font-awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="../assets/css/util.css">
    <link rel="stylesheet" href="../assets/css/CO/co.css">
    <link rel="stylesheet" href="../assets/css/AU/au.css">
</head>

<body style="background-color: rgb(247, 247, 247);">

    <header class="bg-white hidden sm:block" style="margin-bottom: 72px;">
        <section class="flex items-center justify-center relative border-b border-b-highlight">
            <div class="py-3">
                <img class="w-14 h-14" src="../assets/images/logo/Logo.svg" alt="" />
            </div>
        </section>
    </header>

    <main>
        <div class="w-full">
            <div class="bg-white sm:rounded-xl overflow-hidden" style="max-width: 460px; margin: 0 auto;">
                <div class="px-5 sm:px-0 flex items-center justify-between sm:justify-center py-6 sm:py-0">
                    <h4 class="text-2028-1826 font-semibold text-center py-2.5">새로운 비밀번호 설정</h4>
    
                    <button class="h-6 w-6 flex sm:hidden items-center justify-center"
                        onclick="toggleMdClose()"
                    >
                        <i class="text-sm fa-solid fa-x"></i>
                    </button>
                </div>

                <div class="px-5 py-5 sm:px-14 sm:py-12 shadow-sm">
                    <div class="sm:px-1 sm:py-0.5">
                        <div class="pb-14 space-y-5">
                            <div class="flex flex-col gap-y-2">
                                <label for="" class="text-sm font-semibold">새로운 비밀번호</label>

                                <div id="frame-input-new-pass" class="flex items-center justify-between gap-x-2 py-2.5 px-4 rounded border">
                                    <input id="input-new-pass" type="password" class="flex-1 text-15-l-22" placeholder="영문, 숫자, 특수문자 3가지 조합 8자리 이상">
                                    <i class="icon-type-display cursor-pointer text-gray-400 fa-regular fa-eye-slash"></i>                                    
                                </div>

                                <p id="err-input-new-pass" class="text-red-500 text-xs font-normal px-4 hidden">영문, 숫자, 특수문자 조합 8자리 이상으로 입력해주세요</p>
                            </div>

                            <div class="flex flex-col gap-y-2">
                                <label for="" class="text-sm font-semibold">새로운 비밀번호</label>

                                <div id="frame-input-cf-new-pass" class="flex items-center justify-between gap-x-2 py-2.5 px-4 rounded border">
                                    <input id="input-cf-new-pass" type="password" class="flex-1 text-15-l-22" placeholder="새 비밀번호를 한 번 더 입력해 주세요">
                                    <i class="icon-type-display cursor-pointer text-gray-400 fa-regular fa-eye-slash"></i>                                   
                                </div>

                                <p id="err-input-cf-new-pass" class="text-red-500 text-xs font-normal px-4 hidden">영문, 숫자, 특수문자 조합 8자리 이상으로 입력해주세요</p>
                            </div>                            
                        </div>
                        <div class="space-y-3 mb-14">
                            <div>
                                <button onclick="submitForm()"
                                    class="w-full text-gray-300 text-15-l-22 font-semibold py-2.5 text-center rounded bg-gray-100 hover:bg-gray-200">
                                    확인
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="h-6"></div>
        </div>
    </main>

    <div class="h-32"></div>

    <section>
        
        <!-- modal 1 -->
        <div id="modal-close" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 hidden">
            <!-- Modal Content -->
            <div class="bg-white sm:rounded-lg p-5 sm:p-8" style="width: 364px;">
                <!-- Modal Header -->
                <div class="flex items-center justify-center mb-6">
                    <h3 class="text-1724-1826 font-semibold text-center">로그인/회원가입 진행을 닫으시겠습니까?</h3>                   
                </div>
    
                <!-- Address List -->
                <div class="space-y-5 sm:space-y-6 mb-2.5 sm:mb-6">
                    <!-- Address Item 1 -->
                    <p class="text-xs font-normal text-gray-400 text-center">
                        창을 닫으면 진행중인 사항이 모두 사라집니다.
                    </p>
                </div>
    
                <!-- Select Button -->
                <div class="mt-20 sm:mt-6 pb-1 sm:pb-0 pt-6 sm:pt-0 flex items-center justify-center gap-x-4">
                    <button onclick="toggleMdClose()"
                        class="flex-1 w-full py-2 border rounded-md hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-100">
                        취소
                    </button>
                    <button onclick="toggleMdClose()"
                        class="flex-1 w-full py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        확인
                    </button>
                </div>
            </div>
        </div>
        
        <!-- modal 3 -->
        <div id="md-wrong-password" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 hidden">
            <!-- Modal Content -->
            <div class="bg-white sm:rounded-lg p-5 sm:p-8" style="width: 364px;">
                <!-- Modal Header -->
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-1724-1826 font-semibold text-center">
                        입력하신 비밀번호가 일치하지 않습니다.
                    </h3>                   
                </div>
                        
                <div class="mt-20 sm:mt-6 pb-1 sm:pb-0 pt-6 sm:pt-0 flex items-center justify-center gap-x-4">                    
                    <button onclick="toggle('#md-wrong-password')"
                        class="flex-1 w-full py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        확인
                    </button>
                </div>
            </div>
        </div>
    </section>


    <script>

        const inputNewPass = document.querySelector('#input-new-pass')
        const inputCFNewPass = document.querySelector('#input-cf-new-pass')

        const errNewPass = document.querySelector('#err-input-new-pass')
        const frameNewPass = document.querySelector('#frame-input-new-pass')

        const errCFNewPass = document.querySelector('#err-input-cf-new-pass')
        const frameCFNewPass = document.querySelector('#frame-input-cf-new-pass')

        const listIconDisplay = document.querySelectorAll('.icon-type-display')
        const mdClose = document.querySelector('#modal-close')    
        
        let isPasswordType = true
        let passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{9,}$/

        listIconDisplay.forEach(icon => {
            icon.addEventListener('click', () => {
                if (isPasswordType) {
                    inputNewPass.type = 'text'
                    inputCFNewPass.type = 'text'
                } else {
                    inputNewPass.type = 'password'
                    inputCFNewPass.type = 'password'
                }
                isPasswordType = !isPasswordType

                listIconDisplay.forEach(iconEye => {
                    iconEye.classList.toggle('fa-eye-slash')
                    iconEye.classList.toggle('fa-eye')
                });
            })
        });

        function submitForm() {
            
            let check = true

            if (!passwordRegex.test(inputNewPass.value)) {
                check = false
                frameNewPass.classList.add('border-red-500')
                errNewPass.classList.remove('hidden')
            } else {
                frameNewPass.classList.remove('border-red-500')
                errNewPass.classList.add('hidden')
            }

            if (inputCFNewPass.value !== inputNewPass.value) {
                check = false
                frameCFNewPass.classList.add('border-red-500')
                errCFNewPass.classList.remove('hidden')
                toggle('#md-wrong-password')
            } else {
                frameCFNewPass.classList.remove('border-red-500')
                errCFNewPass.classList.add('hidden')
            }

            if (check) {
                frameNewPass.classList.remove('border-red-500')
                errNewPass.classList.add('hidden')

                frameCFNewPass.classList.remove('border-red-500')
                errCFNewPass.classList.add('hidden')

                window.location.href = './AU-login-login.html'
            }
        }

        function toggle(stringQuery) {
            document.querySelector(stringQuery).classList.toggle('hidden')
        }

        function toggleMdClose() {
            mdClose.classList.toggle('hidden')
        }
    </script>
</body>

</html>